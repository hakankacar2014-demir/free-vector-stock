<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bulk Upload | Free Vector Stock</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .upload-box { background: #111; padding: 40px; border-radius: 20px; border: 2px solid #f39c12; width: 500px; text-align: center; }
        h2 { color: #f39c12; margin-bottom: 5px; }
        .info { font-size: 13px; color: #777; margin-bottom: 25px; }
        input[type="password"] { width: 100%; padding: 14px; margin: 10px 0; border-radius: 8px; border: 1px solid #333; background: #222; color: white; box-sizing: border-box; }
        .btn-select { background: #222; color: #f39c12; padding: 12px; border-radius: 8px; cursor: pointer; display: block; margin: 15px 0; border: 1px dashed #f39c12; width: 100%; font-weight: bold; }
        .btn-upload { background: #27ae60; color: #fff; padding: 16px; border-radius: 8px; font-weight: bold; cursor: pointer; border: none; width: 100%; font-size: 16px; margin-top: 10px; }
        #log { margin-top: 20px; font-size: 12px; text-align: left; max-height: 200px; overflow-y: auto; color: #aaa; border-top: 1px solid #222; padding-top: 15px; font-family: monospace; }
    </style>
</head>
<body>

<div class="upload-box">
    <h2>BULK AUTO-UPLOAD</h2>
    <p class="info">Folder names are automatically generated from filenames.</p>
    
    <input type="password" id="ghToken" placeholder="GitHub Token (ghp_...)">
    
    <input type="file" id="fileInput" multiple accept=".jpg,.jpeg,.eps" style="display: none;" onchange="updateUI()">
    <button class="btn-select" onclick="document.getElementById('fileInput').click()">SELECT JPG & EPS FILES</button>
    
    <div id="fileStatus" style="color:#f39c12; font-weight:bold; margin-bottom:10px;"></div>
    
    <button class="btn-upload" onclick="startUpload()">START UPLOAD PROCESS</button>
    
    <div id="log"></div>
</div>

<script>
    function updateUI() {
        const files = document.getElementById('fileInput').files;
        document.getElementById('fileStatus').innerText = files.length + " files ready to upload.";
    }

    async function startUpload() {
        const token = document.getElementById('ghToken').value.trim();
        const files = Array.from(document.getElementById('fileInput').files);
        const log = document.getElementById('log');

        if (!token || files.length === 0) { alert("Token and files required!"); return; }

        log.innerHTML = "üèÅ Starting Upload Process...<br>";

        const jpgFiles = files.filter(f => f.name.toLowerCase().endsWith('.jpg') || f.name.toLowerCase().endsWith('.jpeg'));

        for (let jpgFile of jpgFiles) {
            const baseName = jpgFile.name.split('.')[0];
            const folder = baseName.toLowerCase().replace(/\s+/g, '-');
            const epsFile = files.find(f => f.name.split('.')[0] === baseName && f.name.toLowerCase().endsWith('.eps'));

            if (epsFile) {
                log.innerHTML += `üìÅ Folder: <b>${folder}</b>`;
                const res1 = await uploadFile(jpgFile, folder, token);
                const res2 = await uploadFile(epsFile, folder, token);
                
                if(res1 && res2) {
                    log.innerHTML += ` - <span style="color:#2ecc71">SUCCESS</span><br>`;
                } else {
                    log.innerHTML += ` - <span style="color:#e74c3c">FAILED (Check Token)</span><br>`;
                }
            }
        }
        log.innerHTML += "<br>‚úÖ Done!";
    }

    async function uploadFile(file, folder, token) {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        return new Promise(resolve => {
            reader.onload = async () => {
                const content = reader.result.split(',')[1];
                const path = `vectors/${folder}/${file.name}`;
                try {
                    const res = await fetch(`https://api.github.com/repos/free-vector-stock/free-vector-stock/contents/${path}`, {
                        method: 'PUT',
                        headers: { 'Authorization': `token ${token}` },
                        body: JSON.stringify({ message: `Upload: ${folder}`, content: content })
                    });
                    resolve(res.ok);
                } catch { resolve(false); }
            };
        });
    }
</script>
</body>
</html>
