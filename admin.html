<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - FREE VECTOR STOCK</title>
<style>
body{font-family:Arial;background:#0d0d0d;color:#fff;padding:30px;}
input,button{padding:10px;margin:10px 0;width:100%;}
button{background:#f39c12;border:none;cursor:pointer;font-weight:bold;}
button:hover{opacity:0.85;}
.log{margin-top:20px;background:#111;padding:15px;border-radius:8px;font-size:14px;}
</style>
</head>
<body>

<h2>FREE VECTOR STOCK - ADMIN PANEL</h2>

<input type="text" id="github-user" placeholder="GitHub Username">
<input type="text" id="github-repo" placeholder="Repository Name">
<input type="text" id="github-token" placeholder="GitHub Token">
<input type="text" id="image-url" placeholder="Image URL (uploads/file.jpg)">
<input type="text" id="title" placeholder="Vector Title">

<button onclick="uploadVector()">UPLOAD VECTOR</button>

<div class="log" id="log"></div>

<script>

const categories = {
Business:["business","corporate","finance","office","marketing","startup","analytics","strategy"],
Technology:["technology","digital","ai","data","computer","software","network","cyber"],
Medical:["medical","health","doctor","hospital","medicine","clinic","nurse","pharmacy"],
Nature:["nature","tree","forest","eco","leaf","green","wildlife","environment"],
Sport:["sport","fitness","football","basketball","soccer","gym","training","athlete"],
Education:["education","school","learning","study","university","book","teacher"],
Travel:["travel","vacation","tourism","flight","hotel","journey","map"],
Food:["food","restaurant","meal","drink","coffee","fruit","vegetable"],
Fashion:["fashion","clothing","style","model","trend","outfit"],
Music:["music","instrument","song","audio","sound","guitar","piano"],
Abstract:["abstract","background","shape","pattern","modern","creative"],
Social:["social","media","network","communication","chat","community"],
RealEstate:["real estate","house","home","property","building","apartment"],
Animals:["animal","dog","cat","wildlife","pet","bird"],
Holiday:["holiday","christmas","halloween","new year","celebration"]
};

const genericPool=[
"vector","design","graphic","illustration","icon","template","background",
"collection","set","isolated","logo","banner","poster","branding",
"print","web","ui","pack","art","symbol","minimal","flat",
"colorful","editable","eps","svg","png","jpg","download","premium",
"modern","creative","element","clipart","stock","high quality"
];

function log(msg){
document.getElementById("log").innerHTML+=msg+"<br>";
}

function detectCategory(title){
const lower=title.toLowerCase();
for(const cat in categories){
for(const word of categories[cat]){
if(lower.includes(word)) return cat;
}
}
return "Abstract";
}

function generateKeywords(title,category){
let pool=[...genericPool,...categories[category]];
const titleWords=title.toLowerCase().split(" ");
pool=[...new Set([...pool,...titleWords])];

let result=[];
while(result.length<45 && pool.length>0){
const r=Math.floor(Math.random()*pool.length);
result.push(pool[r]);
pool.splice(r,1);
}
return result;
}

async function uploadVector(){

const user=document.getElementById("github-user").value.trim();
const repo=document.getElementById("github-repo").value.trim();
const token=document.getElementById("github-token").value.trim();
const image=document.getElementById("image-url").value.trim();
const title=document.getElementById("title").value.trim();

if(!user||!repo||!token||!image||!title){
alert("All fields required");
return;
}

const category=detectCategory(title);
const keywords=generateKeywords(title,category);

const newVector={
title:title,
category:category,
image:image,
keywords:keywords
};

const apiURL=`https://api.github.com/repos/${user}/${repo}/contents/admin.json`;

let sha=null;
let existingData={vectors:[]};

const getFile=await fetch(apiURL,{
headers:{Authorization:`token ${token}`}
});

if(getFile.status===200){
const fileData=await getFile.json();
sha=fileData.sha;
existingData=JSON.parse(atob(fileData.content));

if(existingData.vectors.some(v=>v.title===title)){
log("❌ Same title already exists!");
return;
}
}

existingData.vectors.push(newVector);

const updatedContent=btoa(JSON.stringify(existingData,null,2));

const response=await fetch(apiURL,{
method:"PUT",
headers:{
Authorization:`token ${token}`,
"Content-Type":"application/json"
},
body:JSON.stringify({
message:"Add new vector",
content:updatedContent,
sha:sha
})
});

if(response.status===200||response.status===201){
log("✅ Upload Successful!");
}else{
log("❌ Upload Failed!");
}

}

</script>
</body>
</html>
